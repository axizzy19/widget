# Backlog AI Agent API

<div>

**Система для автоматического сбора, анализа и классификации проблем пользователей с помощью AI-агента**

[Документация API](#-документация-api) \
[Архитектура](#-архитектура) \
[Быстрый старт](#-быстрый-старт) \
[API Endpoints](#-api-endpoints)

</div>

## Обзор

Backlog AI Agent API — это система для автоматического сбора и анализа проблем пользователей. Система принимает сообщения через чат-виджет, анализирует их с помощью AI-агента, классифицирует проблемы и создает задачи в бэклоге.

### Проблема, которую решает система:
Пользователи сталкиваются с проблемами на сайте → пишут в чат-поддержку → поддержка тратит время на классификацию → задачи теряются в чатах.

### Наше решение:
Пользователь пишет проблему в виджет → AI-агент мгновенно анализирует → автоматически создается задача в бэклоге → админ видит структурированные задачи с приоритетами.

## Реализовация
- **Чат-интерфейс** - прием сообщений от пользователей
- **AI-анализ** - автоматическая классификация проблем (баг/вопрос/улучшение)
- **Бэклог** - автоматическое создание задач на основе анализа
- **Админ-панель** - просмотр всех обращений и статистики
- **Ролевая модель** - отдельные права для пользователей и администраторов
- **Метрики** - сбор статистики по всем запросам
- **Docker-развертывание** - полная изоляция окружения
- **Swagger документация** - интерактивная документация API

## Технический стек

| Компонент | Технология | Назначение |
|-----------|------------|------------|
| **Backend** | Node.js + TypeScript + Express | Основное API |
| **База данных** | PostgreSQL + TypeORM | Хранение данных |
| **AI Агент** | LangChain + OpenAI (мок) | Анализ проблем |
| **Внешний API** | API2 (заглушка) | Документация/логи |
| **Контейнеризация** | Docker + Docker Compose | Изоляция окружения |
| **Документация** | Swagger/OpenAPI | Документирование API |
| **Аутентификация** | JWT | Безопасность доступа |

## Структура проекта

### Ключевые файлы

| Файл | Назначение |
|------|------------|
| **`src/main.ts`** | Точка входа, настройка Express, маршрутизация |
| **`src/config/database.ts`** | Конфигурация TypeORM и подключение к PostgreSQL |
| **`src/modules/chat/chat.service.ts`** | Основная логика работы с чатами |
| **`src/modules/agent/agent.service.ts`** | Логика AI-агента (анализ проблем) |
| **`docker-compose.yml`** | Настройка контейнеров (PostgreSQL + Backend) |
| **`src/swagger/index.ts`** | Конфигурация Swagger документации |

## Быстрый старт

### Запуск через Docker

```bash
# 1. Клонируйте репозиторий
git clone <repository-url>
cd backend

# 2. Создайте файл .env на основе примера
cp .env.example .env

# 3. Сгенерируйте JWT секрет
echo "JWT_SECRET=$(openssl rand -hex 32)" >> .env

# 4. Запустите контейнеры
docker-compose up --build

# 5. Проверьте работу
curl http://localhost:3000/health
```

| Файл | Адрес |
|------|------------|
| **API** | http://localhost:3000 |
| **Документация** | http://localhost:3000/api-docs |

